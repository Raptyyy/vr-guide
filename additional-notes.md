# Additional Notes

**Additional information regarding VR, look through if needed, click on the topic to expand it**

?> There is another guide written by CSOCSO which has some more in depth details for Virtual Desktop and Pimax users. You can [find it here](https://docs.google.com/document/d/1q-taJt5q9oKWPuCB63rbAC6ZzlZMxqjworgpc10ETDE/edit?tab=t.0).  


<details>
  <summary style="cursor: pointer; font-size: large"><b>Headset adjustments</b></summary>



If your headset has built in `IPD (inter-pupillary distance)` adjustment it is important to set it correctly to have the best image quality and correct world scale, there are various ways to figure out what your IPD is, read more [here](https://www.vive.com/us/support/vive-xr/category_howto/how-can-i-find-my-ipd.html). Most people should be in the 60mm to 70mm range.  

If you are far or near sighted and wear glasses or contact lenses, the same thing will apply to you in VR so you will also need to wear glasses or contact lenses while you're using VR.  

Field of view is an important aspect in VR as it can greatly impact the immersiveness of your experience. Basically the closer your eyes are to the lenses the higher your Field of View will be (up to the limitations of the actual headset). Users wearing glasses will usually have to sacrifice some Field of View for comfort.  
</details>  </br>

<details>
  <summary style="cursor: pointer; font-size: large"><b>Resolution</b></summary>




  Unlike monitors, VR headsets dont have a "native" resolution because of [barrel distortion](https://github.com/user-attachments/assets/cc384ebe-96b5-4272-a26b-cf7a3eb14afe) which reduces detail in the center part of the image, to counteract that we need to supersample - use a higher resolution.    
It is important to set the resolution as high as possible while also trying to avoid sacrificing performance.  
Start with 100% or 1.0x resolution (can also be called render scale) and adjust as needed based on Quality and Performance.  
On some headsets (like Pimax) 100% can already be very high resolution, you might have to lower it to get good performance.    

- **Oculus / Meta** headsets you can adjust it in the Oculus app (Settings > Graphics Preference > Render Resolution) Or in the [Oculus Debug Tool](https://smartglasseshub.com/oculus-debug-tool/) with the Pixels Per Display Pixel Override setting.  
- **Steam VR** headsets you can adjust it in SteamVR settings > Video > Render resolution (Set to custom).  
- **Windows Mixed Reality** headsets you can adjust it in OpenXR Tools for Windows Mixed Reality (Custom Render Scale).  
- **Pimax** headsets you can adjust it in the Pimax Play software (Render Quality).  

?> The Resolution in Content Manager <ins>Settings > Assetto Corsa > Video</ins> does NOT affect VR resolution.  
</details></br>

<details>
  <summary style="cursor: pointer; font-size: large"><b>Reprojection</b></summary>



Reprojection reduces system load by halving the amount of rendered frames and extrapolating the rest to maintain a smooth experience, very similarly to frame generation.    
For example - Using a 90Hz headset, your PC would need to render only 45 fps, the rest being generated by reprojection.    
However, it may cause artifacts, input delay, or stuttering (if it's switching between reprojection on or off). 
- **Oculus / Meta** you can set it in the [Oculus Debug Tool](https://smartglasseshub.com/oculus-debug-tool/) with the PC Asynchronous Spacewarp setting. (Debug tool can sometimes not honor the setting and ignore it).  
Alternative method: Download [this archive](https://github.com/Raptyyy/rapty_ac_vr_guide/raw/refs/heads/main/resources/oculus%20asw%20enable%20disable%20registry.zip)  
Run "oculus disable asw.reg" to disable ASW, or "oculus enable asw.reg" to enable it.
- **Steam VR** you can set it in SteamVR settings (Video > Motion Smoothing).  
- **Windows Mixed Reality** you can set it in OpenXR Tools for Windows Mixed Reality (Motion Reprojection Rate).  
- **Pimax** you can set it in the Pimax Play software (Smart Smoothing).  

Any headset using OpenComposite and the OpenXR Toolkit can also adjust Resolution and Reprojection through the OpenXR Toolkit. 
</details>  </br>

<details>
  <summary style="cursor: pointer; font-size: large"><b>Performance</b></summary>



When it comes to VR performance, the most important thing is having a consistent framerate. You want to utilize your GPU as much as possible by increasing the headsets resolution or graphical settings, but also leaving enough headroom to avoid any fluctuation in framerate. You can use things like Render Stats app in-game, SteamVR performance graph, OpenXR Toolkit advanced overlay or programs like GPU-Z to monitor GPU and CPU usage and adjust settings as needed.  

On some systems using HAGS (Hardware accelerated GPU Scheduling) can potentially cause performance issues (Especially on windows 10 or if you are using OBS), you can change it in Windows Settings > System > Display > Graphics settings or just search for "GPU" in the start search, requires a system restart to apply.  
</details>  </br>

<details>
  <summary style="cursor: pointer; font-size: large"><b>Nvidia Control Panel tweaks</b></summary>

<details>
  <summary>Anisotropic Filtering</summary>
  
Setting Anisotropic Filtering in the Nvidia Control Panel can potentially improve texture quality. Set it as shown in the image below.</br>    
<img src="https://github.com/user-attachments/assets/58802765-659f-497d-81f7-e9fd0489795f" width="600">  
</details>

<details>
  <summary>MFAA (Multi-Frame Anti-Aliasing)</summary>


  [MFAA](https://www.nvidia.com/en-us/geforce/news/multi-frame-sampled-anti-aliasing-delivers-better-performance-and-superior-image-quality/) is an anti-aliasing technique which by alternating AA sample patterns both temporally and spatially can improve the quality of MSAA.  
4xMFAA (2xMSAA + MFAA) has the performance cost of 2xMSAA, with anti-aliasing properties equivalent to 4xMSAA.  
Requires MSAA to bet set to atleast 2x in <ins>Content Manager > Settings > MSAA</ins>  
<img src="https://github.com/user-attachments/assets/ea28aeec-ca77-4f4c-b614-32174566e79c" width="600"> 
</details>
 
</details>  </br>

<details>
  <summary style="cursor: pointer; font-size: large"><b>Miscellaneous tweaks</b></summary>
  
Using overlays (like Discord, Steam, Nvidia overlays) can potentially affect VR performance in a negative way, it can be helpful to disable them when experiencing issues.

Having hardware acceleration enabled in various programs (like Steam, Discord, Spotify) can potentially affect VR performance in a negative way and also use additional VRAM, it can be worthwhile to disable hardware acceleration for such programs.

</details> </br>

<details>
  <summary style="cursor: pointer; font-size: large"><b>Advanced tweaks (only for experienced users)</b></summary>



  
!> **WARNING** These tweaks are meant to be used only if you understand what they do and how to revert them if needed, not recommended for most people.

### CPU Affinity
#### Using only one CCD (Chiplet) on a multi CCD AMD CPU (12 or 16 core).
1. Install and open [Process Lasso](https://bitsum.com/) 
2. Run Assetto Corsa (Ideally in windowed mode)
3. in Process Lasso find acs.exe, right click, select CPU Affinity > Always > Select CPU Affinity
4. Select only the first half of the available CPU cores (CCD0)
5. Press Ok
6. Set Process Lasso to run the Governor at startup, click Options > General > Startup options at the top.

This can also be done using [Process Governor](https://github.com/SystemXFiles/process-governor) if you wish not to use Process Lasso.

?> If you wish to ondo this, in step 3 simply select None for the CPU affinity and then disable Process Lasso at startup.  

Example of the performance difference using various affinities (mainly note the 0.2% and 1% lows)  
<img src="https://github.com/user-attachments/assets/49fe1d09-b348-4e65-9aae-973f3e7fb501" width="720">  



### Nvidia ReBar
[You can read about Nvidia ReBar here](https://www.rockpapershotgun.com/what-is-resizable-bar-and-should-you-use-it)  
Make sure Resizable Bar is enabled and supported on your system, its explained in the link above.  

1. Download Nvidia Profiler Inspector [here](https://github.com/Orbmu2k/nvidiaProfileInspector/releases)
2. Click on the Profiles selection bar and type in Assetto Corsa, then select it
3. Under 5 - Common find rBAR, set Feature to "Enabled" and Size Limit to 0x0000000012C00000 (Paste it in)
4. Press Apply changes in the top right

?> If you wish to ondo this, set  rBAR - Feature to "Disabled" and press Apply changes

Comparison of performance difference when using ReBar, baseline is ReBar disabled (default), 0x0000000012C00000 is 300mb  
<img src="https://github.com/user-attachments/assets/79d0b521-cb77-451e-9861-5703f431c0ba" width="720">  


</details> </br>
